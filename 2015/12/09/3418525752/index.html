<!DOCTYPE HTML><html><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="google-site-verification" content="btmZ9kCHXQC5PXP2bsPS6_VJGmtqB19pXHG2BZDPXIo"><title>HTTP协议读书笔记</title><meta name="author" content="leafsummer"><meta name="description" content="HTTP协议读书笔记通读了一遍&amp;quot;图解HTTP协议&amp;quot;这本书, 确实对HTTP协议有了进一步的认识和理解. 读书笔记如下:WWW构建技术：1）把SGML作为页面的文本标记语言HTML2）作为文档传递协议的HTTP3）指定文档所在地址的URL请求报文：请求报文是由请求方法、请求URI、"><meta property="og:title" content="HTTP协议读书笔记"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta property="og:site_name" content="Leaf0s Blog"><link href="/apple-touch-icon-precomposed.png" sizes="180x180" rel="apple-touch-icon-precomposed"><link rel="alternate" href="/atom.xml" title="Leaf0s Blog" type="application/atom+xml"><link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css"><link rel="stylesheet" href="/css/jquery.fancybox.css"><link rel="stylesheet" href="/css/main.css"><link rel="icon" type="image/x-icon" href="/favicon.ico"></head></html><body><a id="top"></a><div id="main"><div class="behind"><a href="/" class="back black-color"><svg class="i-close" viewBox="0 0 32 32" width="22" height="22" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"><path d="M2 30 L30 2 M30 30 L2 2"></path></svg></a><div class="description">&nbsp;Make things as simple as possible, But no simpler</div></div><div class="main-ctnr"><article class="standard post"><div class="title"><h1 class="page-title center">HTTP协议读书笔记</h1></div><div class="meta center"><time datetime="2015-12-09T14:30:36.000Z"><svg class="i-calendar" viewBox="0 0 32 32" width="16" height="16" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M2 6 L2 30 30 30 30 6 Z M2 15 L30 15 M7 3 L7 9 M13 3 L13 9 M19 3 L19 9 M25 3 L25 9"></path></svg> &nbsp; 2015-12-09 </time>&nbsp; <svg class="i-tag" viewBox="0 0 32 32" width="16" height="16" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><circle cx="24" cy="8" r="2"></circle><path d="M2 18 L18 2 30 2 30 14 14 30 Z"></path></svg> &nbsp; <a href="/categories/读书笔记/">读书笔记</a></div><hr><div class="picture-container"></div><p><strong>HTTP协议读书笔记</strong></p><p>通读了一遍&quot;图解HTTP协议&quot;这本书, 确实对HTTP协议有了进一步的认识和理解. 读书笔记如下:</p><p>WWW构建技术：<br>1）把SGML作为页面的文本标记语言HTML<br>2）作为文档传递协议的HTTP<br>3）指定文档所在地址的URL</p><p>请求报文：<br>请求报文是由请求方法、请求URI、协议版本、可选的请求首部字段和内容实体构成的。</p><p>响应报文：<br>响应报文基本上由协议版本、状态码（表示请求成功或失败的数字代码）、用以解释状态码的原因短语、可选的响应首部字段以及实体主体构成。</p><p>HTTP报文本身是由多行（用CR+LF作换行符）数据构成的字符串文本。HTTP报文大致可分为报文首部和报文主体两块。两者由最初出现的空行（CR+LF）来划分。通常，并不一定要有报文主体。</p><p><img src="/2015/12/09/3418525752/01.png" alt></p><p><img src="/2015/12/09/3418525752/02.png" alt></p><p>请求报文和响应报文的首部内容由以下数据组成。</p><ul><li>请求行：包含用于请求的方法，请求URI和HTTP版本</li><li>状态行：包含表明响应结果的状态码，原因短语和HTTP版本</li><li>首部字段：包含表示请求和响应的各种条件和属性的各类首部。一般有4种首部，分别是：通用首部、请求首部、响应首部和实体首部</li><li>其他：可能包含HTTP的RFC里未定义的首部（Cookie等）</li></ul><p>使用首部字段是为了给浏览器和服务器提供报文主体大小、所使用的语言、认证信息等内容。<br>HTTP首部字段是由首部字段名和字段值构成的，中间用冒号&quot;:&quot;分隔。<br><code>首部字段名: 字段值</code></p><p>另外，字段值对应单个HTTP首部字段可以有多个值。</p><p>HTTP首部字段根据实际用途被分为以下4种类型。</p><ol><li>通用首部字段（General Header Fields）<br>请求报文和响应报文两方都会使用的首部。</li><li>请求首部字段（Request Header Fields）<br>从客户端向服务器端发送请求报文时使用的首部。补充了请求的附加内容、客户端信息、响应内容相关优先级等信息。</li><li>响应首部字段（Response Header Fields）<br>从服务器端向客户端返回响应报文时使用的首部。补充了响应的附加内容，也会要求客户端附加额外的内容信息。<br>4.实体首部字段（Entity Header Fields）<br>针对请求报文和响应报文的实体部分使用的首部。补充了资源内容更新时间等与实体有关的信息。</li></ol><p>HTTP首部字段根据缓存代理和非缓存代理的行为，分成2种类型:</p><ol><li>端到端首部（End-to-end Header）</li><li>逐跳首部（Hop-by-hop Header）</li></ol><p>HTTP方法</p><ol><li>GET:获取资源</li><li>POST:传输实体主体</li><li>PUT:传输文件</li><li>HEAD:获得报文首部</li><li>DELETE:删除文件</li><li>OPTIONS:询问支持的方法</li><li>TRACE:追踪路径</li><li>CONNECT:要求用隧道协议连接代理</li></ol><p>状态码的职责是当客户端向服务器端发送请求时，描述返回的请求结果。</p><p><img src="/2015/12/09/3418525752/03.png" alt></p><p>200 OK 表示从客户端发来的请求在服务器端被正常处理了<br>204 No Content 表示服务器接收的请求已成功处理，但在返回的响应报文中不含实体的主体部分<br>206 Partial Content 表示客户端进行了范围请求，而服务器成功执行了这部分的GET请求</p><p>301 Moved Permanently 永久性重定向。<br>302 Found 临时性重定向<br>303 See Other 请求对应的资源存在着另一个URI，应使用GET方法定向获取请求的资源<br>304 Not Modified 表示客户端发送附带条件的请求时，服务器端允许请求访问资源，但未满足条件的情况。使用缓存，没有任何的响应主体部分。<br>307 Temporary Redirect 临时重定向。该状态码与302 Found有着相同的含义。307会遵照浏览器标准，不会从POST变成GET。</p><p>400 Bad Request 表示请求报文中存在语法错误。当错误发生时，需修改请求的内容后再次发生请求。<br>401 Unauthorized 表示发送的请求需要有通过HTTP认证（BASIC认证、DIGEST认证）的认证信息。<br>403 Forbidden 表明对请求资源的访问被服务器拒绝了<br>404 Not Found 表明服务器上无法找到请求的资源。（拒绝请求且不想说明理由时使用）</p><p>500 Internal Server Error 表明服务器端在执行请求是发生了错误。也可能是Web应用存在的bug或某些临时的故障。<br>503 Service Unavailable 表明服务器暂时处于超负载或正在进行停机维护，现在无法处理请求。如果事先得知解除以上状况需要的时间，最好写入Retry-After首部字段再返回给客户端。</p><p>HTTP通信时，除了客户端和服务器以外，还有一些用于通信数据转发的应用程序，例如：代理、网关和隧道。</p><ol><li>代理是一种有转发功能的应用程序，他扮演了位于服务器和客户端“中间人”的角色，接收由客户端发送的请求并转发给服务器，同时也接收服务器返回的响应并转发给客户端。（每次通过代理服务器转发请求或响应时，会追加写入Via首部信息）</li><li>网关是转发其他服务器通信数据的服务器，接收从客户端发送来的请求时，它就像自己拥有资源的源服务器一样对请求进行处理。有时客户端可能都不会察觉，自己的同学目标是一个网关。（利用网关可以由HTTP请求转化为其他协议通信）<br>3.隧道是在相隔甚远的客户端和服务器两者之间进行中转，并保持双方同学来南京的应用程序。（隧道可按要求建立起一条鱼其他服务器的通信线路，届时使用SSL等加密手段进行通信。）</li></ol><p>HTTP + 加密 + 认证 + 完整性保护 = HTTPS<br>通常HTTP直接和TCP通信。当使用SSL时，则演变成先和SSL通信，再由SSL和TCP通信了。即，所谓HTTPS，其实就是身披SSL协议这层外壳的HTTP。<br><img src="/2015/12/09/3418525752/04.png" alt></p><p>HTTP标准中的瓶颈：</p><ol><li>一条连接上只可发送一个请求。</li><li>请求只能从客户端开始。客户端不可以接受除响应以外的指令。</li><li>请求/响应首部未经压缩就发生。首部信息越多延迟越大。</li><li>发送冗长的首部。每次互相发送相同的首部造成的浪费较多。</li><li>可任意选择数据压缩格式。非强制压缩发送。</li></ol><p>请求异步解决方案:<br>Ajax解决方案<br>Ajax（Asynchronous JavaScript and XML，异步JavaScript与XML技术）是一种有效利用JavaScript和DOM（Document Object Model，文档对象模型）的操作，以达到局部Web页面替换加载的异步通信手段。<br>Ajax的核心技术是名为XMLHttpRequest的API，通过JavaScript脚本语言的调用就能和服务器进行HTTP通信。<br>而利用Ajax实时地从服务器获取内容，有可能会导致大量请求产生。另外,Ajax仍未解决HTTP协议本身存在的问题。</p><p>Comet的解决方法<br>一旦服务器端有内容更新了，Comet不会让请求等待，而是直接给客户端返回响应。这是一种通过延迟应答，模拟实现服务器端向客户端推送（Server Push）的功能。<br>通常，服务器端接收到请求，在处理完毕后就会立即返回响应，但为了实现推送功能，Comet会先将响应置于挂起状态，当服务器端有内容更新时，再返回该响应。因此，服务器端一旦有更新，就可以立即反馈给客户端。<br>内容上虽然可以做到实时更新，但为了保留响应，一次连接的持续时间也变长了。期间，为了维持连接会消耗更多的资源。另外，Comet也仍未解决HTTP协议本身存在的问题。</p><p>SPDY协议<br>SPDY没有完全改写HTTP协议，而是在TCP/IP的应用层与传输层之间通过新加会话层的形式运作。同时，考虑到安全性问题，SPDY规定通信中使用SSL。</p><p><img src="/2015/12/09/3418525752/05.png" alt></p><p>使用SPDY后，HTTP协议额外获得以下功能</p><ol><li>多路复用流</li><li>赋予请求优先级</li><li>压缩HTTP首部</li><li>推送功能</li><li>服务器提示功能</li></ol><p>SPDY基本上只是将单个域名（IP地址）的通信多路复用，所以当一个Web网站上使用多个域名下的资源，改善效果就会受到限制。</p><p>WebSocket使用浏览器进行全双工通信<br>当时筹划将WebSocket作为HTML5标准的一部分，而现在他却逐渐变成独立的协议标准。WebSocket即Web浏览器与Web服务器之间全双工通信标准。WebSocket技术主要是为了解决Ajax和Comet里XMLHTTPRequest附带的缺陷所引起的问题。<br>由于是建立在HTTP基础上的协议，因此连接的发起方仍是客户端，而一旦确立WebSocket通信连接，不论服务器还是客户端，任意一方都可直接向对方发送报文。</p><p>WebSocket协议的主要特点：<br>1.推送功能<br>2.减少通信量<br><img src="/2015/12/09/3418525752/06.png" alt></p><p>HTTP/2.0 7项技术<br><img src="/2015/12/09/3418525752/07.png" alt></p><p><br><strong>本文地址</strong>： <a href="https://leaf0s.fun/2015/12/09/3418525752/">https://leaf0s.fun/2015/12/09/3418525752/</a></p></article><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="busuanzi center">页阅读量:&nbsp;<span id="busuanzi_value_page_pv"></span>&nbsp;・&nbsp; 站访问量:&nbsp;<span id="busuanzi_value_site_pv"></span>&nbsp;・&nbsp; 站访客数:&nbsp;<span id="busuanzi_value_site_uv"></span></div><div id="disqus_thread"></div><script>var disqus_config=function(){this.page.url="https://leaf0s.fun/2015/12/09/3418525752/index.html",this.page.identifier="2015/12/09/3418525752/"};!function(){var e=document,t=e.createElement("script");t.src="//www-leaf0s-fun.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)}()</script></div></div><footer class="page-footer"><div class="clearfix"></div><div class="right-foot"><div class="firstrow"><a href="#top" target="_self"><svg class="i-caret-right" viewBox="0 0 32 32" width="24" height="24" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"><path d="M10 30 L26 16 10 2 Z"></path></svg> </a>© LeafSummer 2014-2020</div><div class="secondrow"><a href="https://github.com/gaoryrt/hexo-theme-pln">Theme Pln</a></div></div><div class="clearfix"></div></footer><script src="//cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script><script src="/js/search.min.js"></script><script src="/js/jquery.fancybox.min.js"></script><script src="/js/wrapImage.js"></script><script type="text/javascript">var disqus_shortname="www-leaf0s-fun";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("body")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}(),$(".dropdown").click(function(e){var n=$(this);e.stopPropagation(),$(n).children(".dropdown-content")[$(n).children(".dropdown-content").hasClass("open")?"removeClass":"addClass"]("open")}),$(document).click(function(){$(".dropdown-content").removeClass("open")});var path="/search.xml";searchFunc(path,"local-search-input","local-search-result")</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-144177217-1"></script><script>var host=window.location.hostname;if("localhost"!==host||"127.0.0.1"!==host){function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-144177217-1")}</script></body>