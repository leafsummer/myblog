<!DOCTYPE HTML><html><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="google-site-verification" content="btmZ9kCHXQC5PXP2bsPS6_VJGmtqB19pXHG2BZDPXIo"><title>docker命令学习</title><meta name="author" content="leafsummer"><meta name="description" content="后台启动docker服务1sudo docker -d &amp;amp;下载一个ubuntu镜像1sudo docker pull ubuntu查看下载的所有docker镜像1sudo docker images （显示精简镜像ID，带参数-notrunc=true，显示完整镜像ID）查看某个镜像的详细信"><meta property="og:title" content="docker命令学习"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta property="og:site_name" content="Leaf0s Blog"><link href="/apple-touch-icon-precomposed.png" sizes="180x180" rel="apple-touch-icon-precomposed"><link rel="alternate" href="/atom.xml" title="Leaf0s Blog" type="application/atom+xml"><link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css"><link rel="stylesheet" href="/css/jquery.fancybox.css"><link rel="stylesheet" href="/css/main.css"><link rel="icon" type="image/x-icon" href="/favicon.ico"></head></html><body><a id="top"></a><div id="main"><div class="behind"><a href="/" class="back black-color"><svg class="i-close" viewBox="0 0 32 32" width="22" height="22" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"><path d="M2 30 L30 2 M30 30 L2 2"></path></svg></a><div class="description">&nbsp;Make things as simple as possible, But no simpler</div></div><div class="main-ctnr"><article class="standard post"><div class="top-scroll-bar"></div><div class="title"><h1 class="page-title center">docker命令学习</h1></div><div class="meta center"><time datetime="2015-04-26T13:32:19.000Z"><svg class="i-calendar" viewBox="0 0 32 32" width="16" height="16" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M2 6 L2 30 30 30 30 6 Z M2 15 L30 15 M7 3 L7 9 M13 3 L13 9 M19 3 L19 9 M25 3 L25 9"></path></svg> &nbsp; 2015-04-26 </time>&nbsp; <svg class="i-tag" viewBox="0 0 32 32" width="16" height="16" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><circle cx="24" cy="8" r="2"></circle><path d="M2 18 L18 2 30 2 30 14 14 30 Z"></path></svg> &nbsp; <a href="/categories/技术总结/">技术总结</a></div><hr><div class="picture-container"></div><ol><li>后台启动docker服务</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker -d &amp;</span><br></pre></td></tr></table></figure><ol start="2"><li>下载一个ubuntu镜像</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker pull ubuntu</span><br></pre></td></tr></table></figure><ol start="3"><li>查看下载的所有docker镜像</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker images （显示精简镜像ID，带参数-notrunc=<span class="literal">true</span>，显示完整镜像ID）</span><br></pre></td></tr></table></figure><ol start="4"><li>查看某个镜像的详细信息</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker inspect 精简ID</span><br></pre></td></tr></table></figure><ol start="5"><li>显示镜像的层次结构</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker images -tree</span><br></pre></td></tr></table></figure><ol start="6"><li>通过指定文件（Dockerfile）来创建一个新的容器</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo docker build -t vieux/apache:2.0</span><br><span class="line">sudo docker build github.com/creack/docker-firefox</span><br></pre></td></tr></table></figure><ol start="7"><li>提交一个容器</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo docker ps -l</span><br><span class="line">sudo docker commit c3f279d17e0a  SvenDowideit/testimage:version3</span><br></pre></td></tr></table></figure><ol start="8"><li>将容器的文件和目录复制到主机中</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo docker cp 7bb0e258aefe:/etc/debian_version .</span><br><span class="line">sudo docker cp blue_frog:/etc/hosts .</span><br></pre></td></tr></table></figure><ol start="9"><li>列出更改的容器文件系统文件和目录</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker diff 7bb0e258aefe</span><br></pre></td></tr></table></figure><ol start="10"><li>从服务器获取实时事件信息</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker events（监听事件）</span><br></pre></td></tr></table></figure><ol start="11"><li>导出容器系统作为一个tar文档发送到stdout</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker <span class="built_in">export</span> red_panda &gt; latest.tar</span><br></pre></td></tr></table></figure><p>12.创建一个空容器系统镜像和引用压缩文件的内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo docker import http://example.com/exampleimage.tgz</span><br><span class="line">cat exampleimage.tgz | sudo docker import - exampleimagelocal:new （引用本地文件）</span><br></pre></td></tr></table></figure><ol start="13"><li>显示镜像的历史操作</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker <span class="built_in">history</span> docker</span><br></pre></td></tr></table></figure><ol start="14"><li>显示整个容器系统信息</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker info</span><br></pre></td></tr></table></figure><ol start="15"><li>通过url给镜像容器增加文件</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo docker insert 8283e18b24bc https://raw.github.com/metalivedev/django/master/postinstall /tmp/postinstall.sh</span><br><span class="line">06fd35556d7b</span><br></pre></td></tr></table></figure><ol start="16"><li>查看容器底层信息</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo docker inspect 60734</span><br><span class="line">sudo docker inspect -format=<span class="string">'&#123;&#123;.NetworkSettings.IPAddress&#125;&#125;'</span> <span class="variable">$INSTANCE_ID</span>（获取一个容器ip地址）</span><br></pre></td></tr></table></figure><ol start="17"><li>杀死一个正在运行的容器（发送终止信号）</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage: docker <span class="built_in">kill</span> CONTAINER [CONTAINER...]</span><br></pre></td></tr></table></figure><ol start="18"><li>从输入流中加载一个压缩包，恢复包含的所有镜像和tag</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage: docker load &lt; ubuntu.tar</span><br></pre></td></tr></table></figure><ol start="19"><li>登陆你在docker服务器注册的账号 index.docker.io</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Usage: docker login [OPTIONS] [SERVER]</span><br><span class="line">docker login localhost:8080</span><br></pre></td></tr></table></figure><p>20.取出容器的log日志</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage: docker logs [OPTIONS] CONTAINER</span><br></pre></td></tr></table></figure><ol start="21"><li>查找私有地址转换到共有地址端口</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage: docker port [OPTIONS] CONTAINER PRIVATE_PORT</span><br></pre></td></tr></table></figure><ol start="22"><li>查看正在运行的镜像</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Usage: docker ps [OPTIONS]</span><br><span class="line">-a=<span class="literal">false</span>: 查看所有的镜像 默认情况下只查看正在运行的镜像</span><br></pre></td></tr></table></figure><ol start="23"><li>从远程仓库中获取镜像</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage: docker pull NAME</span><br></pre></td></tr></table></figure><ol start="24"><li>推送本地镜像到远程仓库</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage: docker push NAME</span><br></pre></td></tr></table></figure><ol start="25"><li>重启正在运行的远程仓库</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage: docker restart [OPTIONS] NAME</span><br></pre></td></tr></table></figure><ol start="26"><li>删除一个或者所有的容器</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage: docker rm [OPTIONS] CONTAINER</span><br></pre></td></tr></table></figure><ol start="27"><li>删除一个或者多个镜像</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Usage: docker rmi IMAGE [IMAGE...]</span><br><span class="line">sudo docker rmi fd484f19954f</span><br><span class="line">sudo docker rmi test2</span><br></pre></td></tr></table></figure><ol start="28"><li>run</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">Usage: docker run [OPTIONS] IMAGE[:TAG] [COMMAND] [ARG...]</span><br><span class="line"></span><br><span class="line">Run a <span class="built_in">command</span> <span class="keyword">in</span> a new container</span><br><span class="line"></span><br><span class="line">  -a=map[]: 附加标准输入、输出或者错误输出</span><br><span class="line">  -c=0: 共享CPU格式（相对重要）</span><br><span class="line">  -cidfile=<span class="string">""</span>: 将容器的ID标识写入文件</span><br><span class="line">  -d=<span class="literal">false</span>: 分离模式，在后台运行容器，并且打印出容器ID</span><br><span class="line">  -e=[]: 设置环境变量</span><br><span class="line">  -h=<span class="string">""</span>: 容器的主机名称</span><br><span class="line">  -i=<span class="literal">false</span>: 保持输入流开放即使没有附加输入流</span><br><span class="line">  -privileged=<span class="literal">false</span>: 给容器扩展的权限</span><br><span class="line">  -m=<span class="string">""</span>: 内存限制 (格式: &lt;number&gt;&lt;optional unit&gt;, unit单位 = b, k, m or g)</span><br><span class="line">  -n=<span class="literal">true</span>: 允许镜像使用网络</span><br><span class="line">  -p=[]: 匹配镜像内的网络端口号</span><br><span class="line">  -rm=<span class="literal">false</span>:当容器退出时自动删除容器 (不能跟 -d一起使用)</span><br><span class="line">  -t=<span class="literal">false</span>: 分配一个伪造的终端输入</span><br><span class="line">  -u=<span class="string">""</span>: 用户名或者ID</span><br><span class="line">  -dns=[]: 自定义容器的DNS服务器</span><br><span class="line">  -v=[]: 创建一个挂载绑定：[host-dir]:[container-dir]:[rw|ro]. 如果容器目录丢失，docker会创建一个新的卷</span><br><span class="line">  -volumes-from=<span class="string">""</span>: 挂载容器所有的卷</span><br><span class="line">  -entrypoint=<span class="string">""</span>: 覆盖镜像设置默认的入口点</span><br><span class="line">  -w=<span class="string">""</span>: 工作目录内的容器</span><br><span class="line">  -lxc-conf=[]: 添加自定义 -lxc-conf=<span class="string">"lxc.cgroup.cpuset.cpus = 0,1"</span></span><br><span class="line">  -sig-proxy=<span class="literal">true</span>: 代理接收所有进程信号 (even <span class="keyword">in</span> non-tty mode)</span><br><span class="line">  -expose=[]: 让你主机没有开放的端口</span><br><span class="line">  -link=<span class="string">""</span>: 连接到另一个容器 (name:<span class="built_in">alias</span>)</span><br><span class="line">  -name=<span class="string">""</span>: 分配容器的名称，如果没有指定就会随机生成一个</span><br><span class="line">  -P=<span class="literal">false</span>: Publish all exposed ports to the host interfaces 公布所有显示的端口主机接口</span><br></pre></td></tr></table></figure><p>docker会先创建一个新的可写的容器层来指定镜像，通过指定命令来启动他, docker run相当于运行API/containers/create在/container/(id)/start之前<br>docker run命令可以用结合docker commit来改变正在运行的容器！</p><ol start="29"><li>通过标准输出流存储镜像包含所有父层的、tag、version</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage: docker save image &gt; repository.tar</span><br></pre></td></tr></table></figure><ol start="30"><li>搜索docker 镜像</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage: docker search TERM</span><br></pre></td></tr></table></figure><ol start="31"><li>启动一个停止的容器</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage: docker start [OPTIONS] CONTAINER</span><br></pre></td></tr></table></figure><ol start="32"><li>关闭一个容器</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage: docker stop [OPTIONS] CONTAINER [CONTAINER...]</span><br></pre></td></tr></table></figure><ol start="33"><li>给镜像仓库添加标签</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage: docker tag [OPTIONS] IMAGE REPOSITORY[:TAG]</span><br></pre></td></tr></table></figure><ol start="34"><li>查看容器内运行的进程</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage: docker top CONTAINER [ps OPTIONS]</span><br></pre></td></tr></table></figure><ol start="35"><li>显示docker的版本和最后更新版本信息</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker version</span><br></pre></td></tr></table></figure><ol start="36"><li>等待容器停止，打印出退出编码</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage: docker <span class="built_in">wait</span> [OPTIONS] NAME</span><br></pre></td></tr></table></figure><p><br><strong>本文地址</strong>： <a href="https://leaf0s.fun/2015/04/26/1737205767/">https://leaf0s.fun/2015/04/26/1737205767/</a></p></article><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="busuanzi center">页阅读量:&nbsp;<span id="busuanzi_value_page_pv"></span>&nbsp;・&nbsp; 站访问量:&nbsp;<span id="busuanzi_value_site_pv"></span>&nbsp;・&nbsp; 站访客数:&nbsp;<span id="busuanzi_value_site_uv"></span></div><div id="disqus_thread"></div><script>var disqus_config=function(){this.page.url="https://leaf0s.fun/2015/04/26/1737205767/index.html",this.page.identifier="2015/04/26/1737205767/"};!function(){var e=document,t=e.createElement("script");t.src="//www-leaf0s-fun.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)}()</script></div></div><footer class="page-footer"><div class="clearfix"></div><div class="right-foot"><div class="firstrow"><a href="#top" target="_self"><svg class="i-caret-right" viewBox="0 0 32 32" width="24" height="24" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"><path d="M10 30 L26 16 10 2 Z"></path></svg> </a>© LeafSummer 2014-2020</div><div class="secondrow"><a href="https://github.com/leafsummer/hexo-theme-pln">Theme Pln</a></div></div><div class="clearfix"></div></footer><script src="//cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script><script src="//sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script><script src="/js/search.min.js"></script><script src="/js/scrollbar.js"></script><script src="/js/jquery.fancybox.min.js"></script><script src="/js/wrapImage.js"></script><script type="text/javascript">var disqus_shortname="www-leaf0s-fun";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("body")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}(),$(".dropdown").click(function(e){var n=$(this);e.stopPropagation(),$(n).children(".dropdown-content")[$(n).children(".dropdown-content").hasClass("open")?"removeClass":"addClass"]("open")}),$(document).click(function(){$(".dropdown-content").removeClass("open")});var path="/search.xml";searchFunc(path,"local-search-input","local-search-result")</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-144177217-1"></script><script>var host=window.location.hostname;if("localhost"!==host||"127.0.0.1"!==host){function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-144177217-1")}</script></body>